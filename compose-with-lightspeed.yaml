services:
  road-core-service:
    image: quay.io/redhat-ai-dev/road-core-service:latest # dclint disable-line service-image-require-explicit-tag
    container_name: road-core-service
    depends_on:
      rhdh:
        condition: service_started
    volumes:
      - ./configs:/opt/app-root/src/configs:Z
      - user-data:/opt/app-root/src/user-data/feedback:Z
    environment:
      - PROJECT=rhdh
      - RCS_CONFIG_FILE=/opt/app-root/src/configs/lightspeed/rcsconfig.yaml
      - OPENAI_API_KEY=${LIGHTSPEED_SERVER_TOKEN}
      - LIGHTSPEED_SERVER_ID=${LIGHTSPEED_SERVER_ID}
      - LIGHTSPEED_SERVER_URL=${LIGHTSPEED_SERVER_URL}
      - LIGHTSPEED_SERVER_TOKEN=${LIGHTSPEED_SERVER_TOKEN}
      - RHDH_CONFIG_FILE=/opt/app-root/src/configs/app-config/app-config.lightspeed.local.yaml
    network_mode: "service:rhdh"
    user: "root"
volumes:
  user-data:
